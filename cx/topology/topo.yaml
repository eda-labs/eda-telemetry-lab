---
srl_leaf_template: &srl_leaf_template
  labels:
    eda.nokia.com/security-profile: managed
    eda.nokia.com/role: leaf
  spec:
    operatingSystem: srl
    platform: 7220 IXR-D2L
    version: 25.7.2
    nodeProfile: srlinux-ghcr-25.7.2

srl_spine_template: &srl_spine_template
  labels:
    eda.nokia.com/security-profile: managed
    eda.nokia.com/role: spine
  spec:
    operatingSystem: srl
    platform: 7220 IXR-D3L
    version: 25.7.2
    nodeProfile: srlinux-ghcr-25.7.2

# Link labels
interswitch_labels: &interswitch_labels
  eda.nokia.com/role: interSwitch

edge_labels: &edge_labels
  eda.nokia.com/role: edge
  eda.nokia.com/macvrf202: "true"
  eda.nokia.com/macvrf1001: "true"

####### TOPOLOGY #######
items:
  - spec:
      nodes:
        - name: leaf1
          <<: *srl_leaf_template
        - name: leaf2
          <<: *srl_leaf_template
        - name: leaf3
          <<: *srl_leaf_template
        - name: leaf4
          <<: *srl_leaf_template
        - name: spine1
          <<: *srl_spine_template
        - name: spine2
          <<: *srl_spine_template

      links:
        ######## ISL links #########
        - name: leaf1-spine1
          labels:
            <<: *interswitch_labels
          spec:
            links:
              - type: interSwitch
                local:
                  node: leaf1
                  interface: ethernet-1-49
                remote:
                  node: spine1
                  interface: ethernet-1-1

        - name: leaf1-spine2
          labels:
            <<: *interswitch_labels
          spec:
            links:
              - type: interSwitch
                local:
                  node: leaf1
                  interface: ethernet-1-50
                remote:
                  node: spine2
                  interface: ethernet-1-1

        - name: leaf2-spine1
          labels:
            <<: *interswitch_labels
          spec:
            links:
              - type: interSwitch
                local:
                  node: leaf2
                  interface: ethernet-1-49
                remote:
                  node: spine1
                  interface: ethernet-1-2

        - name: leaf2-spine2
          labels:
            <<: *interswitch_labels
          spec:
            links:
              - type: interSwitch
                local:
                  node: leaf2
                  interface: ethernet-1-50
                remote:
                  node: spine2
                  interface: ethernet-1-2

        - name: leaf3-spine1
          labels:
            <<: *interswitch_labels
          spec:
            links:
              - type: interSwitch
                local:
                  node: leaf3
                  interface: ethernet-1-49
                remote:
                  node: spine1
                  interface: ethernet-1-3

        - name: leaf3-spine2
          labels:
            <<: *interswitch_labels
          spec:
            links:
              - type: interSwitch
                local:
                  node: leaf3
                  interface: ethernet-1-50
                remote:
                  node: spine2
                  interface: ethernet-1-3

        - name: leaf4-spine1
          labels:
            <<: *interswitch_labels
          spec:
            links:
              - type: interSwitch
                local:
                  node: leaf4
                  interface: ethernet-1-49
                remote:
                  node: spine1
                  interface: ethernet-1-4

        - name: leaf4-spine2
          labels:
            <<: *interswitch_labels
          spec:
            links:
              - type: interSwitch
                local:
                  node: leaf4
                  interface: ethernet-1-50
                remote:
                  node: spine2
                  interface: ethernet-1-4

        ######## Edge links #########

        - name: l1-l2-eth-1-1-lag-1
          labels:
            <<: *edge_labels
          encapType: dot1q
          spec:
            links:
              - type: edge
                local:
                  node: leaf1
                  interface: ethernet-1-1
              - type: edge
                local:
                  node: leaf2
                  interface: ethernet-1-1

        - name: l1-l2-eth-1-2-lag-2
          labels:
            <<: *edge_labels
          encapType: dot1q
          spec:
            links:
              - type: edge
                local:
                  node: leaf1
                  interface: ethernet-1-2
              - type: edge
                local:
                  node: leaf2
                  interface: ethernet-1-2

        - name: l3-l4-eth-1-1-lag-1
          labels:
            <<: *edge_labels
          encapType: dot1q
          spec:
            links:
              - type: edge
                local:
                  node: leaf3
                  interface: ethernet-1-1
              - type: edge
                local:
                  node: leaf4
                  interface: ethernet-1-1

        - name: l3-l4-eth-1-2-lag-2
          labels:
            <<: *edge_labels
          encapType: dot1q
          spec:
            links:
              - type: edge
                local:
                  node: leaf3
                  interface: ethernet-1-2
              - type: edge
                local:
                  node: leaf4
                  interface: ethernet-1-2
